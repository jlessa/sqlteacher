CREATE DOMAIN DOM_TIPO_QUESTAO AS TEXT
DEFAULT NULL
CHECK(VALUE IN('MULTIPLA ESCOLHA','SQL');

CREATE TABLE PERMISSAO(
IDPERMISSAO INT PRIMARY KEY,
NOME VARCHAR(50) NOT NULL UNIQUE,
DESCRICAO VARCHAR(255)
);

CREATE TABLE IDENTIFICACAO(
IDIDENTIFICACAO INT PRIMARY KEY,
NOME VARCHAR(50) NOT NULL,
SOBRENOME VARCHAR(100) NOT NULL,
EMAIL VARCHAR(70) NOT NULL);

CREATE TABLE USUARIO(
IDUSUARIO INT PRIMARY KEY,
NOMEUSUARIO VARCHAR(50) NOT NULL UNIQUE,
SENHA VARCHAR(15) NOT NULL,
IDENTIFICACAO INT REFERENCES IDENTIFICACAO(IDIDENTIFICACAO)
);

CREATE TABLE QUESTAO(
IDQUESTAO INT PRIMARY KEY,
CONTEUDO VARCHAR(500) NOT NULL,
RESUMO VARCHAR(100),
TIPO DOM_TIPO_QUESTAO NOT NULL
);

CREATE TABLE RESPOSTA(
IDRESPOSTA INT PRIMARY KEY,
CONTEUDO BYTEA NOT NULL,
IDQUESTAO INT REFERENCES QUESTAO(IDQUESTAO)
);

CREATE TABLE QUESTAO_ANALISE(
IDQUESTAO_ANALISE INT PRIMARY KEY,
CONTEUDO VARCHAR(500) NOT NULL,
RESUMO VARCHAR(100),
TIPO DOM_TIPO_QUESTAO NOT NULL,
IDQUESTAO INT REFERENCES QUESTAO(IDQUESTAO),
IDUSUARIO INT REFERENCES USUARIO(IDUSUARIO)
);

CREATE TABLE RESPOSTA_ANALISE(
IDRESPOSTA_ANALISE INT PRIMARY KEY,
CONTEUDO BYTEA NOT NULL,
IDQUESTAO_ANALISE INT REFERENCES QUESTAO_ANALISE(IDQUESTAO_ANALISE)
);

CREATE SEQUENCE PERMISSAO_ID_SEQ INCREMENT BY 1  MINVALUE 1 START 1 NO CYCLE OWNED BY PERMISSAO.IDPERMISSAO;
CREATE SEQUENCE USUARIO_ID_SEQ INCREMENT BY 1  MINVALUE 1 START 1 NO CYCLE OWNED BY USUARIO.IDUSUARIO;
CREATE SEQUENCE IDENTIFICACAO_ID_SEQ INCREMENT BY 1  MINVALUE 1 START 1 NO CYCLE OWNED BY IDENTIFICACAO.IDIDENTIFICACAO;
CREATE SEQUENCE QUESTAO_ID_SEQ INCREMENT BY 1  MINVALUE 1 START 1 NO CYCLE OWNED BY QUESTAO.IDQUESTAO;
CREATE SEQUENCE RESPOSTA_ID_SEQ INCREMENT BY 1  MINVALUE 1 START 1 NO CYCLE OWNED BY RESPOSTA.IDRESPOSTA;
CREATE SEQUENCE QUESTAO_ANALISE_ID_SEQ INCREMENT BY 1  MINVALUE 1 START 1 NO CYCLE OWNED BY QUESTAO_ANALISE.IDQUESTAO_ANALISE;
CREATE SEQUENCE RESPOSTA_ANALISE_ID_SEQ INCREMENT BY 1  MINVALUE 1 START 1 NO CYCLE OWNED BY RESPOSTA_ANALISE.IDRESPOSTA_ANALISE;

